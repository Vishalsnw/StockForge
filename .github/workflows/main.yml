name: Check for Placeholder Files

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

jobs:
  check-placeholders:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Search for placeholder files
        run: |
          # List of placeholder keywords to search for
          PLACEHOLDER_PATTERNS=(
            "<h1>.*(Home|Company|Market|Profile|Dashboard|Welcome|Page).*</h1>"
            "<p>.*(Build|Welcome|Coming soon|See top players).*</p>"
            "PLACEHOLDER"
            "TODO"
          )
          FOUND=0
          for pattern in "${PLACEHOLDER_PATTERNS[@]}"; do
            if grep -rEn --include="*.js" --include="*.jsx" --include="*.ts" --include="*.tsx" "$pattern" src/; then
              echo "::error file=src::Placeholder pattern found: $pattern"
              FOUND=1
            fi
          done
          if [ $FOUND -ne 0 ]; then
            echo "❌ Placeholder content found in source files."
            exit 1
          fi
          echo "✅ No placeholder content found."
