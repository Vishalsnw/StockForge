name: Fix Blank Screen Issue

on:
  workflow_dispatch:
    inputs:
      user_name:
        description: Target User
        required: false
        default: Vishalsnw
        type: string

jobs:
  fix-blank-screen:
    name: Fix Blank Screen
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - name: Fix CSS Variables
        run: |
          echo "Adding missing CSS variables..."
          
          # Add CSS variables to index.css
          cat >> frontend/src/index.css << 'EOF'
          
          /* CSS Variables for StockForge - 2025-06-12 14:59:01 */
          :root {
            --color-primary: #1a1a2e;
            --color-secondary: #16213e;
            --color-tertiary: #0f172a;
            --color-background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --color-text: #ffffff;
            --color-text-secondary: #e2e8f0;
            --color-text-muted: #94a3b8;
            --color-border: #334155;
            --color-accent: #3b82f6;
            --color-accent-light: #60a5fa;
            --color-accent-dark: #1d4ed8;
            --color-success: #10b981;
            --color-danger: #ef4444;
            --color-warning: #f59e0b;
            --color-info: #06b6d4;
            --radius-base: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 24px;
            --radius-full: 9999px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --shadow-glow: 0 0 20px rgba(59, 130, 246, 0.4);
            --transition-all: all 0.2s ease;
            --transition-colors: color 0.2s ease, background-color 0.2s ease;
            --transition-transform: transform 0.2s ease;
            --font-size-xs: 0.75rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-2xl: 1.5rem;
            --font-size-3xl: 1.875rem;
            --font-size-4xl: 2.25rem;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
            --font-weight-bold: 700;
            --font-weight-extrabold: 800;
            --line-height-tight: 1.25;
            --line-height-snug: 1.375;
            --line-height-normal: 1.5;
            --line-height-relaxed: 1.625;
            --z-loading: 9999;
            --z-modal-backdrop: 9998;
            --z-dropdown: 1000;
            --z-tooltip: 1001;
            --z-toast: 1002;
          }
          
          body {
            background: var(--color-background);
            color: var(--color-text);
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
          }
          
          .text-success { color: var(--color-success) !important; }
          .text-danger { color: var(--color-danger) !important; }
          .text-warning { color: var(--color-warning) !important; }
          .text-info { color: var(--color-info) !important; }
          EOF
          
          echo "CSS variables added"

      - name: Create MarketDashboard CSS
        run: |
          mkdir -p frontend/src/components/MarketDashboard
          
          cat > frontend/src/components/MarketDashboard/MarketDashboard.css << 'EOF'
          /* MarketDashboard CSS - 2025-06-12 14:59:01 */
          
          .market-dashboard {
            padding: 1rem;
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
          
          .dashboard-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            backdrop-filter: blur(10px);
          }
          
          .loading-content {
            text-align: center;
            color: var(--color-text);
          }
          
          .loading-spinner .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid var(--color-accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
          }
          
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
          
          .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-lg);
          }
          
          .header-left h1 {
            color: var(--color-text);
            margin: 0;
            font-size: var(--font-size-2xl);
          }
          
          .header-left p {
            color: var(--color-text-secondary);
            margin: 0.5rem 0 0 0;
          }
          
          .engine-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
          }
          
          .engine-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-lg);
            font-weight: var(--font-weight-semibold);
            cursor: pointer;
            transition: var(--transition-all);
            color: white;
          }
          
          .engine-btn.start {
            background: linear-gradient(135deg, var(--color-success), #059669);
          }
          
          .engine-btn.stop {
            background: linear-gradient(135deg, var(--color-danger), #dc2626);
          }
          
          .engine-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
          }
          
          .engine-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--color-text-secondary);
          }
          
          .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
          }
          
          .status-dot.active {
            background: var(--color-success);
            box-shadow: 0 0 8px var(--color-success);
          }
          
          .status-dot.inactive {
            background: var(--color-danger);
          }
          
          .market-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
          }
          
          .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
          
          .stat-card h3 {
            color: var(--color-text-secondary);
            margin: 0 0 0.5rem 0;
            font-size: var(--font-size-sm);
          }
          
          .stat-value {
            color: var(--color-text);
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
          }
          
          .dashboard-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            border-radius: var(--radius-lg);
          }
          
          .tab-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-base);
            background: transparent;
            color: var(--color-text-secondary);
            cursor: pointer;
            transition: var(--transition-all);
            font-weight: var(--font-weight-medium);
          }
          
          .tab-btn.active {
            background: var(--color-accent);
            color: white;
            box-shadow: var(--shadow-md);
          }
          
          .tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-text);
          }
          
          .tab-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: 2rem;
            min-height: 400px;
          }
          
          .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
          }
          
          .overview-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            backdrop-filter: blur(10px);
          }
          
          .overview-card h3 {
            color: var(--color-text);
            margin: 0 0 1rem 0;
            font-size: var(--font-size-lg);
          }
          
          .summary-info p {
            color: var(--color-text-secondary);
            margin: 0.5rem 0;
          }
          
          .quick-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .quick-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-base);
          }
          
          .ticker {
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
          }
          
          .change {
            font-weight: var(--font-weight-semibold);
          }
          
          .movers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
          }
          
          .movers-section h3 {
            color: var(--color-text);
            margin: 0 0 1rem 0;
            font-size: var(--font-size-lg);
          }
          
          .stocks-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
          }
          
          .stock-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-base);
            cursor: pointer;
            transition: var(--transition-all);
          }
          
          .stock-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
          }
          
          .stock-info {
            flex: 1;
          }
          
          .stock-ticker {
            font-weight: var(--font-weight-bold);
            color: var(--color-text);
            font-size: var(--font-size-lg);
          }
          
          .stock-name {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
            margin-top: 0.25rem;
          }
          
          .stock-sector {
            color: var(--color-text-muted);
            font-size: var(--font-size-xs);
            margin-top: 0.25rem;
          }
          
          .stock-price {
            text-align: right;
          }
          
          .price {
            font-weight: var(--font-weight-bold);
            color: var(--color-text);
            font-size: var(--font-size-lg);
          }
          
          .sectors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
          }
          
          .sector-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            text-align: center;
          }
          
          .sector-card h4 {
            color: var(--color-text);
            margin: 0 0 1rem 0;
          }
          
          .sector-stats {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
          }
          
          .sector-change {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
          }
          
          .sector-companies {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
          }
          
          .search-header {
            margin-bottom: 2rem;
          }
          
          .search-header h3 {
            color: var(--color-text);
            margin: 0 0 1rem 0;
          }
          
          .search-input {
            width: 100%;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-lg);
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-text);
            font-size: var(--font-size-base);
            backdrop-filter: blur(10px);
          }
          
          .search-input::placeholder {
            color: var(--color-text-muted);
          }
          
          .search-input:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
          }
          
          .search-results {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-height: 500px;
            overflow-y: auto;
          }
          
          .stock-details {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--color-secondary);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: 2rem;
            z-index: 1000;
            min-width: 400px;
            max-width: 600px;
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-2xl);
          }
          
          .details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
          }
          
          .details-header h3 {
            color: var(--color-text);
            margin: 0;
          }
          
          .close-btn {
            background: none;
            border: none;
            color: var(--color-text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: var(--radius-base);
            transition: var(--transition-colors);
          }
          
          .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-text);
          }
          
          .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
          }
          
          .detail-item {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
          }
          
          .detail-item .label {
            color: var(--color-text-muted);
            font-size: var(--font-size-sm);
          }
          
          .detail-item .value {
            color: var(--color-text);
            font-weight: var(--font-weight-semibold);
          }
          
          .dashboard-footer {
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            text-align: center;
          }
          
          .footer-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
          }
          
          @media (max-width: 768px) {
            .market-dashboard {
              padding: 0.5rem;
            }
            
            .dashboard-header {
              flex-direction: column;
              gap: 1rem;
              text-align: center;
            }
            
            .market-stats {
              grid-template-columns: repeat(2, 1fr);
            }
            
            .movers-grid {
              grid-template-columns: 1fr;
            }
            
            .sectors-grid {
              grid-template-columns: repeat(2, 1fr);
            }
            
            .stock-details {
              min-width: 90vw;
              max-width: 90vw;
              padding: 1rem;
            }
            
            .footer-info {
              flex-direction: column;
              gap: 0.5rem;
            }
          }
          EOF
          
          echo "MarketDashboard CSS created"

      - name: Fix App.jsx Header Structure
        run: |
          # Add proper header and main styling to App.css
          cat >> frontend/src/App.css << 'EOF'
          
          /* Additional App Styles - 2025-06-12 14:59:01 */
          
          .App {
            min-height: 100vh;
            background: var(--color-background);
            color: var(--color-text);
          }
          
          .app-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
          }
          
          .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
          }
          
          .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
          }
          
          .header-left h1 {
            color: var(--color-text);
            margin: 0;
            font-size: var(--font-size-2xl);
          }
          
          .version {
            background: var(--color-accent);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-base);
            font-size: var(--font-size-xs);
          }
          
          .header-center {
            display: flex;
            align-items: center;
          }
          
          .market-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--color-text-secondary);
          }
          
          .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
          }
          
          .status-indicator.active {
            background: var(--color-success);
            box-shadow: 0 0 8px var(--color-success);
          }
          
          .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
          }
          
          .user-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            text-align: right;
            color: var(--color-text-secondary);
            font-size: var(--font-siz
